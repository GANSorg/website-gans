<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>GANS Sponsor Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://js.arcgis.com/4.34/esri/themes/light/main.css" />
    <link rel="stylesheet" href="./css/styles.css" />

    <script src="https://js.arcgis.com/4.34/"></script>
    <script type="module" src="https://js.arcgis.com/4.34/map-components/"></script>

    <script type="module" src="./js/main.js"></script>
</head>
<body>
    <div id="viewDiv">
        <button id="fullScreenButton" class="esri-icon-zoom-out-fixed customButton" title="Toggle Fullscreen" aria-label="About" type="button"></button>
        <arcgis-home position="top-left"></arcgis-home>
        <button id="sponsorListButton" class="customButton" title="Toggle Sponsors List" aria-label="Toggle Sponsors List" type="button">
            <calcite-icon icon="partner" aria-hidden="true"/>
        </button>
        <button id="legendButton" class="esri-icon-legend customButton" title="Toggle Legend" aria-label="Toggle Legend" type="button"></button>

        <div id="legendPanel">
            <h4 style="margin-bottom: 10px;" aria-label="Sponsorship Tiers">Sponsorship Tiers</h4>
            <table style="border-collapse: collapse;">
                <tr>
                    <td>
                        <span class="glowWrapper">
                            <span class="glowPulseRing"></span>
                            <span class="glowInnerDot"></span>
                        </span>
                    </td>
                    <td>
                        <div class="tierRow">
                            <span>Platinum</span>
                            <b id="platinumCountIndicator">(0)</b>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td><span class="tierSpan" style="background-color:#e6b800;" aria-label="Gold"></span></td>
                    <td>
                        <div class="tierRow">
                            <span>Gold</span>
                            <b id="goldCountIndicator">(0)</b>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span class="tierSpan" style="background-color:#8c9aaa;" aria-label="Silver"></span>
                    </td>
                    <td>
                        <div class="tierRow">
                            <span>Silver</span>
                            <b id="silverCountIndicator">(0)</b>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span class="tierSpan" style="background-color:#996633;" aria-label="Geo"></span>
                    </td>
                    <td>
                        <div class="tierRow">
                            <span>Geo</span>
                            <b id="geoCountIndicator">(0)</b>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
        <button id="helpButton" class="esri-icon-question customButton" title="About" aria-label="About" type="button"></button>

        <div id="sponsorSidebar" class="sponsor-sidebar" role="dialog" aria-modal="true" aria-labelledby="sponsorSidebarTitle" hidden>
            <div class="sponsor-sidebar-header">
                <h2 id="sponsorSidebarTitle">Sponsors</h2>
                <button id="closeSponsorList" class="close-button" aria-label="Close sponsor list" type="button">X</button>
            </div>

            <div class="sponsor-list-content" role="list">
                <!-- Sponsor entries will be inserted here dynamically -->
            </div>
        </div>

        <div id="helpDialog" class="help-dialog" role="dialog" aria-modal="true" aria-labelledby="helpTitle">
            <div class="help-dialog-header">
                <h2 id="helpTitle">How to Use the GANS Sponsor Map</h2>
                <button id="helpCloseButton" class="close-button" aria-label="Close help dialog" type="button">X</button>
            </div>
            <div class="help-dialog-content">
                <p>This interactive map displays the corporate sponsors of the Geomatics Association of Nova Scotia (GANS) and their geographic locations.</p>
                
                <p><strong>Click a pin</strong> to view sponsor details, including contact information, website link, and logo.</p>
                <p><strong>Pan the map</strong> by clicking and dragging (or swiping on mobile).</p>      
                <p><strong>Zoom</strong> with +/- buttons, mouse scroll, or pinch gesture.</p>       
                <p><strong>Full screen button</strong> toggles the map to fill the screen.</p>    
                <p><strong>Home button</strong> resets the map to its default view, centered on Nova Scotia.</p>
                <p><strong>Sponsor List button</strong> opens a sidebar with a tier-sorted list of all sponsors.</p>  
                <p><strong>Legend button</strong> displays the sponsorship tier colour key.</p>

                <span>Map Design: October 2025</span><br/>              
                <span>Data Last Updated: <span id="lastUpdatedSpan">-</span></span>

                <hr/>
                <i>The Geomatics Association of Nova Scotia</i>
            </div>
        </div>

        <a href="https://gans.ca" target="_blank" rel="noopener noreferrer">
            <img src="https://gans.ca/resources/Pictures/logos/GANS-logo-tagline-transparent.png" alt="GANS Logo" aria-label="GANS Logo" class="gans-logo" />
        </a>
    </div>
</body>
</html>
